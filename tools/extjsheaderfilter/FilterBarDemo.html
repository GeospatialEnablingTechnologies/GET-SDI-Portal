<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="http://cdn.sencha.io/ext-4.1.1-gpl/resources/css/ext-all.css" />
		<link rel="stylesheet" type="text/css" href="resources/css/uxs.css" />
		<link rel="stylesheet" type="text/css" href="resources/css/overrides.css" />
		<link rel="stylesheet" type="text/css" href="resources/css/app.css" />
		<script type="text/javascript" src="http://cdn.sencha.io/ext-4.1.1-gpl/ext-all.js"></script>
		<script type="text/javascript" src="ux/form/field/ClearButton.js"></script>
		<script type="text/javascript" src="ux/form/field/OperatorButton.js"></script>
		<script type="text/javascript" src="ux/grid/column/ActionPro.js"></script>
		<script type="text/javascript" src="ux/grid/FilterBar.js"></script>
		<script type="text/javascript" src="ux/grid/AutoResizer.js"></script>
		<script type="text/javascript">
			Ext.onReady(function(){
			    Ext.QuickTips.init();

			    var myData = [
			        [1,'3m Co',                               71.72, 0.02,  0.03,  '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [2,'Alcoa Inc',                           29.01, 0.42,  1.47,  '9/1 12:00am', 'Category 2', 'Country 10', 0],
			        [3,'Altria Group Inc',                    83.81, 0.28,  0.34,  '9/1 12:00am', 'Category 3', 'Country 9', 0],
			        [4,'American Express Company',            52.55, 0.01,  0.02,  '9/1 12:00am', 'Category 4', 'Country 6', 1],
			        [5,'American International Group, Inc.',  64.13, 0.31,  0.49,  '9/1 12:00am', 'Category 5', 'Country 1', 0],
			        [6,'AT&T Inc.',                           31.61, -0.48, -1.54, '9/1 12:00am', 'Category 6', 'Country 10', 0],
			        [7,'Boeing Co.',                          75.43, 0.53,  0.71,  '9/1 12:00am', 'Category 1', 'Country 1', 1],
			        [8,'Caterpillar Inc.',                    67.27, 0.92,  1.39,  '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [9,'Citigroup, Inc.',                     49.37, 0.02,  0.04,  '9/1 12:00am', 'Category 7', 'Country 5', 0],
			        [10,'E.I. du Pont de Nemours and Company', 40.48, 0.51,  1.28,  '9/1 12:00am', 'Category 1', 'Country 9', 0],
			        [11,'Exxon Mobil Corp',                    68.1,  -0.43, -0.64, '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [12,'General Electric Company',            34.14, -0.08, -0.23, '9/1 12:00am', 'Category 2', 'Country 200', 0],
			        [13,'General Motors Corporation',          30.27, 1.09,  3.74,  '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [14,'Hewlett-Packard Co.',                 36.53, -0.03, -0.08, '9/1 12:00am', 'Category 4', 'Country 1', 1],
			        [15,'Honeywell Intl Inc',                  38.77, 0.05,  0.13,  '9/1 12:00am', null, 'Country 10', 0],
			        [16,'Intel Corporation',                   19.88, 0.31,  1.58,  '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [17,'International Business Machines',     81.41, 0.44,  0.54,  '9/1 12:00am', 'Category 1', 'Country 3', 0],
			        [18,'Johnson & Johnson',                   64.72, 0.06,  0.09,  '9/1 12:00am', 'Category 1', null, 0],
			        [19,'JP Morgan & Chase & Co',              45.73, 0.07,  0.15,  '9/1 12:00am', 'Category 1', 'Country 1', 1],
			        [20,'McDonald\'s Corporation',             36.76, 0.86,  2.40,  '9/1 12:00am', 'Category 2', 'Country 1', 0],
			        [21,'Merck & Co., Inc.',                   40.96, 0.41,  1.01,  '9/1 12:00am', 'Category 1', 'Country 7', 0],
			        [22,'Microsoft Corporation',               25.84, 0.14,  0.54,  '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [23,'Pfizer Inc',                          27.96, 0.4,   1.45,  '9/1 12:00am', 'Category 5', 'Country 5', 0],
			        [24,'The Coca-Cola Company',               45.07, 0.26,  0.58,  '9/1 12:00am', 'Category 1', 'Country 400', 1],
			        [25,'The Home Depot, Inc.',                34.64, 0.35,  1.02,  '9/1 12:00am', 'Category 1', 'Country 1', 0],
			        [26,'The Procter & Gamble Company',        61.91, 0.01,  0.02,  '9/1 12:00am', 'Category 3', 'Country 2', 1],
			        [27,'United Technologies Corporation',     63.26, 0.55,  0.88,  '9/1 12:00am', 'Category 5', null, 0],
			        [28,'Verizon Communications',              35.57, 0.39,  1.11,  '9/1 12:00am', 'Category 6', 'Country 0', 0],
			        [29,'Wal-Mart Stores, Inc.',               45.45, 0.73,  1.63,  '9/1 12:00am', 'Category 1', 'Country 1', 0]
			    ];

			    /**
			     * Custom function used for column renderer
			     * @param {Object} val
			     */
			    function change(val) {
			        if (val > 0) {
			            return '<span style="color:green;">' + val + '</span>';
			        } else if (val < 0) {
			            return '<span style="color:red;">' + val + '</span>';
			        }
			        return val;
			    }

			    /**
			     * Custom function used for column renderer
			     * @param {Object} val
			     */
			    function pctChange(val) {
			        if (val > 0) {
			            return '<span style="color:green;">' + val + '%</span>';
			        } else if (val < 0) {
			            return '<span style="color:red;">' + val + '%</span>';
			        }
			        return val;
			    }

			    // create the data store
			    var store = Ext.create('Ext.data.ArrayStore', {
			        fields: [
			           {name: 'id', 	    type: 'int'},
					   {name: 'company'},
			           {name: 'price',      type: 'float'},
			           {name: 'change',     type: 'float'},
			           {name: 'pctChange',  type: 'float'},
			           {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'},
			           {name: 'category'},
			           {name: 'country'},
			           {name: 'not_delete', 	type: 'int'}
			        ],
			        data: myData
			    });

			    // create the Grid
			    var grid = Ext.create('Ext.grid.Panel', {
			        store: store,
					plugins: [{
			        	ptype: 'filterbar',
			        	renderHidden: false,
			        	showShowHideButton: true,
			        	showClearAllButton: true
					}],
			        columns: {
						plugins: [{
							ptype: 'gridautoresizer'
						}],
			        	items: [{
			        		text	  : '#',
			        		widht	  : 50,
							dataIndex : 'id',
			        		filter	  : {
			        			type: 'int',
			        			minValue: 1
							}
						},
						{
			                text     : 'Company',
			                flex     : 1,
			                dataIndex: 'company',
			                filter: true
			            },
			            {
			                text     : 'Price',
			                width    : 300,
			                renderer : 'usMoney',
			                dataIndex: 'price',
			                filter: true
			            },
			            {
			                text     : 'Change',
			                width    : 300,
			                renderer : change,
			                dataIndex: 'change',
			                filter: true
			            },
			            {
			                text     : '% Change',
			                width    : 75,
			                renderer : pctChange,
			                dataIndex: 'pctChange',
			                filter: true
			            },
			            {
			                xtype	 : 'datecolumn',
							text     : 'Last Updated',
			                width    : 85,
			                format 	 : 'm/d/Y',
			                dataIndex: 'lastChange',
			                filter: true
			            },
			            {
			                text     : 'Category',
			                flex     : 0.5,
			                dataIndex: 'category',
			                filter: 'combo'
			            },
			            {
			                text     : 'Country',
			                flex     : 0.5,
			                dataIndex: 'country',
			                filter: 'list'
			            },
			            {
			                xtype: 'actioncolumnpro',
			                items: [{
			                    iconCls: 'edit',
			                    tooltip: 'Edit this'
			                },{
			                	iconCls: 'delete',
			                	tooltip: 'Delete this',
			                	hideIndex: 'not_delete'
							},{
			                    clsFn: function(record, item) {
			                    	if (Math.random() > 0.3) {
			                    		item.tooltip = 'Deactivate this';
			                    		return 'inactivate';
			                    	} else {
			                    		item.tooltip = 'Activate this';
			                    		return 'activate';
									}
								}
			                }]
			            }
			        	],
			        },
			        title: 'Array Grid',
			        viewConfig: {
			            stripeRows: true
			        }
			    });
				Ext.widget('viewport', {
					layout: 'fit',
					items: [grid]
				});
				grid.down('actioncolumnpro').on('actionclick', function(grid, store, record, action) {
					alert('Action: ' + action + ' on record: ' + record.getId());
				});
			});
		</script>
	</head>
	<body>
	</body>
</html>
